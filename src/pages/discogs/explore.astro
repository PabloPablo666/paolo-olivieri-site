---
import Base from "../../layouts/Base.astro";
---

<Base title="Discogs Lakehouse · Explore" description="Client-side SQL using DuckDB WASM on a local multi-table Parquet demo pack.">
  <body data-discogs-mode="explore">
    <h1>Discogs Lakehouse · Explore</h1>
    <p class="muted">Query a multi-table Discogs demo pack locally in your browser (DuckDB WASM).</p>

    <div style="display:grid; grid-template-columns: 360px 1fr; gap:16px; align-items:start;">
      <aside class="card">
        <div class="muted small" style="margin-bottom:8px;">Query Pack</div>
        <input id="querySearch" placeholder="Search presets (title/tags)…" style="width:100%; margin-bottom:10px;" />
        <div id="queryPack"></div>
        
      </aside>

      <main class="card">
        <div id="status" class="muted">Ready.</div>
        <div class="hr"></div>

        <textarea
          id="sql"
          rows="10"
          style="width:100%; font-family: ui-monospace, Menlo, Monaco, Consolas, monospace;"
        >SELECT release_id, title, country
FROM releases
WHERE country IS NOT NULL
LIMIT 20;</textarea>

        <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
          <button class="btn" id="btnLoad" type="button">Load dataset</button>
          <button class="btn" id="btnRun" type="button">Run query</button>
        </div>

        <div class="hr"></div>
        <pre id="out" style="white-space:pre-wrap; margin:0; font-family: ui-monospace, Menlo, Monaco, Consolas, monospace;">Waiting…</pre>
      </main>
    </div>

    <script type="module" src="/src/scripts/discogs-workbench.client.ts"></script>
  </body>
</Base>
